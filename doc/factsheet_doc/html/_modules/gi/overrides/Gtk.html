

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>gi.overrides.Gtk &mdash; Factsheet 0.5.0 documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home" alt="Documentation Home"> Factsheet
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../guide/toc_guide.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../src/toc_src.html">Source Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../test/toc_test.html">Unit Test Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../test_manual/toc_test_manual.html">Manual Tests</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Factsheet</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../index.html">Module code</a> &raquo;</li>
        
      <li>gi.overrides.Gtk</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for gi.overrides.Gtk</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- Mode: Python; py-indent-offset: 4 -*-</span>
<span class="c1"># vim: tabstop=4 shiftwidth=4 expandtab</span>
<span class="c1">#</span>
<span class="c1"># Copyright (C) 2009 Johan Dahlin &lt;johan@gnome.org&gt;</span>
<span class="c1">#               2010 Simon van der Linden &lt;svdlinden@src.gnome.org&gt;</span>
<span class="c1">#</span>
<span class="c1"># This library is free software; you can redistribute it and/or</span>
<span class="c1"># modify it under the terms of the GNU Lesser General Public</span>
<span class="c1"># License as published by the Free Software Foundation; either</span>
<span class="c1"># version 2.1 of the License, or (at your option) any later version.</span>
<span class="c1">#</span>
<span class="c1"># This library is distributed in the hope that it will be useful,</span>
<span class="c1"># but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c1"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
<span class="c1"># Lesser General Public License for more details.</span>
<span class="c1">#</span>
<span class="c1"># You should have received a copy of the GNU Lesser General Public</span>
<span class="c1"># License along with this library; if not, write to the Free Software</span>
<span class="c1"># Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301</span>
<span class="c1"># USA</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">warnings</span>

<span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">collections</span> <span class="k">as</span> <span class="nn">abc</span>
<span class="k">else</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">abc</span>

<span class="kn">from</span> <span class="nn">gi.repository</span> <span class="kn">import</span> <span class="n">GObject</span>
<span class="kn">from</span> <span class="nn">.._ossighelper</span> <span class="kn">import</span> <span class="n">wakeup_on_signal</span><span class="p">,</span> <span class="n">register_sigint_fallback</span>
<span class="kn">from</span> <span class="nn">.._gtktemplate</span> <span class="kn">import</span> <span class="n">Template</span>
<span class="kn">from</span> <span class="nn">..overrides</span> <span class="kn">import</span> <span class="n">override</span><span class="p">,</span> <span class="n">strip_boolean_result</span><span class="p">,</span> <span class="n">deprecated_init</span>
<span class="kn">from</span> <span class="nn">..module</span> <span class="kn">import</span> <span class="n">get_introspection_module</span>
<span class="kn">from</span> <span class="nn">.._compat</span> <span class="kn">import</span> <span class="n">string_types</span>
<span class="kn">from</span> <span class="nn">gi</span> <span class="kn">import</span> <span class="n">PyGIDeprecationWarning</span>


<span class="n">Gtk</span> <span class="o">=</span> <span class="n">get_introspection_module</span><span class="p">(</span><span class="s1">&#39;Gtk&#39;</span><span class="p">)</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[]</span>


<span class="n">Template</span> <span class="o">=</span> <span class="n">Template</span>
<span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Template&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">_version</span> <span class="o">==</span> <span class="s1">&#39;2.0&#39;</span><span class="p">:</span>
    <span class="n">warn_msg</span> <span class="o">=</span> <span class="s2">&quot;You have imported the Gtk 2.0 module.  Because Gtk 2.0 </span><span class="se">\</span>
<span class="s2">was not designed for use with introspection some of the </span><span class="se">\</span>
<span class="s2">interfaces and API will fail.  As such this is not supported </span><span class="se">\</span>
<span class="s2">by the pygobject development team and we encourage you to </span><span class="se">\</span>
<span class="s2">port your app to Gtk 3 or greater. PyGTK is the recomended </span><span class="se">\</span>
<span class="s2">python module to use with Gtk 2.0&quot;</span>

    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">warn_msg</span><span class="p">,</span> <span class="ne">RuntimeWarning</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">PyGTKDeprecationWarning</span><span class="p">(</span><span class="n">PyGIDeprecationWarning</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;PyGTKDeprecationWarning&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_construct_target_list</span><span class="p">(</span><span class="n">targets</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a list of TargetEntry items from a list of tuples in the form (target, flags, info)</span>

<span class="sd">    The list can also contain existing TargetEntry items in which case the existing entry</span>
<span class="sd">    is re-used in the return list.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">target_entries</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">targets</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entry</span><span class="p">,</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">TargetEntry</span><span class="p">):</span>
            <span class="n">entry</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">TargetEntry</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="o">*</span><span class="n">entry</span><span class="p">)</span>
        <span class="n">target_entries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">target_entries</span>


<span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;_construct_target_list&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_extract_handler_and_args</span><span class="p">(</span><span class="n">obj_or_map</span><span class="p">,</span> <span class="n">handler_name</span><span class="p">):</span>
    <span class="n">handler</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj_or_map</span><span class="p">,</span> <span class="n">abc</span><span class="o">.</span><span class="n">Mapping</span><span class="p">):</span>
        <span class="n">handler</span> <span class="o">=</span> <span class="n">obj_or_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">handler_name</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">handler</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj_or_map</span><span class="p">,</span> <span class="n">handler_name</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">handler</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s1">&#39;Handler </span><span class="si">%s</span><span class="s1"> not found&#39;</span> <span class="o">%</span> <span class="n">handler_name</span><span class="p">)</span>

    <span class="n">args</span> <span class="o">=</span> <span class="p">()</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">handler</span><span class="p">,</span> <span class="n">abc</span><span class="o">.</span><span class="n">Sequence</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Handler </span><span class="si">%s</span><span class="s2"> tuple can not be empty&quot;</span> <span class="o">%</span> <span class="n">handler</span><span class="p">)</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">handler</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="n">handler</span> <span class="o">=</span> <span class="n">handler</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">elif</span> <span class="ow">not</span> <span class="n">callable</span><span class="p">(</span><span class="n">handler</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Handler </span><span class="si">%s</span><span class="s1"> is not a method, function or tuple&#39;</span> <span class="o">%</span> <span class="n">handler</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">handler</span><span class="p">,</span> <span class="n">args</span>


<span class="c1"># Exposed for unit-testing.</span>
<span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;_extract_handler_and_args&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_builder_connect_callback</span><span class="p">(</span><span class="n">builder</span><span class="p">,</span> <span class="n">gobj</span><span class="p">,</span> <span class="n">signal_name</span><span class="p">,</span> <span class="n">handler_name</span><span class="p">,</span> <span class="n">connect_obj</span><span class="p">,</span> <span class="n">flags</span><span class="p">,</span> <span class="n">obj_or_map</span><span class="p">):</span>
    <span class="n">handler</span><span class="p">,</span> <span class="n">args</span> <span class="o">=</span> <span class="n">_extract_handler_and_args</span><span class="p">(</span><span class="n">obj_or_map</span><span class="p">,</span> <span class="n">handler_name</span><span class="p">)</span>

    <span class="n">after</span> <span class="o">=</span> <span class="n">flags</span> <span class="o">&amp;</span> <span class="n">GObject</span><span class="o">.</span><span class="n">ConnectFlags</span><span class="o">.</span><span class="n">AFTER</span>
    <span class="k">if</span> <span class="n">connect_obj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">after</span><span class="p">:</span>
            <span class="n">gobj</span><span class="o">.</span><span class="n">connect_object_after</span><span class="p">(</span><span class="n">signal_name</span><span class="p">,</span> <span class="n">handler</span><span class="p">,</span> <span class="n">connect_obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">gobj</span><span class="o">.</span><span class="n">connect_object</span><span class="p">(</span><span class="n">signal_name</span><span class="p">,</span> <span class="n">handler</span><span class="p">,</span> <span class="n">connect_obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">after</span><span class="p">:</span>
            <span class="n">gobj</span><span class="o">.</span><span class="n">connect_after</span><span class="p">(</span><span class="n">signal_name</span><span class="p">,</span> <span class="n">handler</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">gobj</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">signal_name</span><span class="p">,</span> <span class="n">handler</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">_FreezeNotifyManager</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="n">obj</span>

    <span class="k">def</span> <span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_value</span><span class="p">,</span> <span class="n">traceback</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">thaw_child_notify</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">Widget</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">Widget</span><span class="p">):</span>

    <span class="n">translate_coordinates</span> <span class="o">=</span> <span class="n">strip_boolean_result</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">Widget</span><span class="o">.</span><span class="n">translate_coordinates</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">freeze_child_notify</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Widget</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">freeze_child_notify</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">_FreezeNotifyManager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">drag_dest_set_target_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_list</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">target_list</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">target_list</span><span class="p">,</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">TargetList</span><span class="p">)):</span>
            <span class="n">target_list</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">TargetList</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">_construct_target_list</span><span class="p">(</span><span class="n">target_list</span><span class="p">))</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Widget</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">drag_dest_set_target_list</span><span class="p">(</span><span class="n">target_list</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">drag_source_set_target_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_list</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">target_list</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">target_list</span><span class="p">,</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">TargetList</span><span class="p">)):</span>
            <span class="n">target_list</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">TargetList</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">_construct_target_list</span><span class="p">(</span><span class="n">target_list</span><span class="p">))</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Widget</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">drag_source_set_target_list</span><span class="p">(</span><span class="n">target_list</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">style_get_property</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">property_name</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">prop</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_style_property</span><span class="p">(</span><span class="n">property_name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">prop</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Class &quot;</span><span class="si">%s</span><span class="s1">&quot; does not contain style property &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span>
                                 <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">property_name</span><span class="p">))</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">GObject</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="n">prop</span><span class="o">.</span><span class="n">value_type</span><span class="p">)</span>

        <span class="n">Gtk</span><span class="o">.</span><span class="n">Widget</span><span class="o">.</span><span class="n">style_get_property</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">property_name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="n">get_value</span><span class="p">()</span>


<span class="n">Widget</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">Widget</span><span class="p">)</span>
<span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Widget&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Container</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">Container</span><span class="p">,</span> <span class="n">Widget</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_children</span><span class="p">())</span>

    <span class="k">def</span> <span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">child</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_children</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_children</span><span class="p">())</span>

    <span class="k">def</span> <span class="fm">__bool__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="c1"># alias for Python 2.x object protocol</span>
    <span class="n">__nonzero__</span> <span class="o">=</span> <span class="fm">__bool__</span>

    <span class="n">get_focus_chain</span> <span class="o">=</span> <span class="n">strip_boolean_result</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">Container</span><span class="o">.</span><span class="n">get_focus_chain</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">child_get_property</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">child</span><span class="p">,</span> <span class="n">property_name</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">prop</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_child_property</span><span class="p">(</span><span class="n">property_name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">prop</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Class &quot;</span><span class="si">%s</span><span class="s1">&quot; does not contain child property &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span>
                                 <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">property_name</span><span class="p">))</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">GObject</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="n">prop</span><span class="o">.</span><span class="n">value_type</span><span class="p">)</span>

        <span class="n">Gtk</span><span class="o">.</span><span class="n">Container</span><span class="o">.</span><span class="n">child_get_property</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">child</span><span class="p">,</span> <span class="n">property_name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="n">get_value</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">child_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">child</span><span class="p">,</span> <span class="o">*</span><span class="n">prop_names</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of child property values for the given names.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">child_get_property</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">prop_names</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">child_set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">child</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set a child properties on the given child to key/value pairs.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">child_set_property</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>


<span class="n">Container</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">Container</span><span class="p">)</span>
<span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Container&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Editable</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">Editable</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">insert_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">position</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">Editable</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">insert_text</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">position</span><span class="p">)</span>

    <span class="n">get_selection_bounds</span> <span class="o">=</span> <span class="n">strip_boolean_result</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">Editable</span><span class="o">.</span><span class="n">get_selection_bounds</span><span class="p">,</span> <span class="n">fail_ret</span><span class="o">=</span><span class="p">())</span>


<span class="n">Editable</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">Editable</span><span class="p">)</span>
<span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Editable&quot;</span><span class="p">)</span>


<span class="k">if</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">_version</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span> <span class="s2">&quot;3.0&quot;</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Action</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">Action</span><span class="p">):</span>
        <span class="fm">__init__</span> <span class="o">=</span> <span class="n">deprecated_init</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">Action</span><span class="o">.</span><span class="fm">__init__</span><span class="p">,</span>
                                   <span class="n">arg_names</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">,</span> <span class="s1">&#39;tooltip&#39;</span><span class="p">,</span> <span class="s1">&#39;stock_id&#39;</span><span class="p">),</span>
                                   <span class="n">category</span><span class="o">=</span><span class="n">PyGTKDeprecationWarning</span><span class="p">)</span>

    <span class="n">Action</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">Action</span><span class="p">)</span>
    <span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Action&quot;</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">RadioAction</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">RadioAction</span><span class="p">):</span>
        <span class="fm">__init__</span> <span class="o">=</span> <span class="n">deprecated_init</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">RadioAction</span><span class="o">.</span><span class="fm">__init__</span><span class="p">,</span>
                                   <span class="n">arg_names</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">,</span> <span class="s1">&#39;tooltip&#39;</span><span class="p">,</span> <span class="s1">&#39;stock_id&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">),</span>
                                   <span class="n">category</span><span class="o">=</span><span class="n">PyGTKDeprecationWarning</span><span class="p">)</span>

    <span class="n">RadioAction</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">RadioAction</span><span class="p">)</span>
    <span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;RadioAction&quot;</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">ActionGroup</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">ActionGroup</span><span class="p">):</span>
        <span class="fm">__init__</span> <span class="o">=</span> <span class="n">deprecated_init</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">ActionGroup</span><span class="o">.</span><span class="fm">__init__</span><span class="p">,</span>
                                   <span class="n">arg_names</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,),</span>
                                   <span class="n">category</span><span class="o">=</span><span class="n">PyGTKDeprecationWarning</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">add_actions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entries</span><span class="p">,</span> <span class="n">user_data</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            The add_actions() method is a convenience method that creates a number</span>
<span class="sd">            of gtk.Action  objects based on the information in the list of action</span>
<span class="sd">            entry tuples contained in entries and adds them to the action group.</span>
<span class="sd">            The entry tuples can vary in size from one to six items with the</span>
<span class="sd">            following information:</span>

<span class="sd">                * The name of the action. Must be specified.</span>
<span class="sd">                * The stock id for the action. Optional with a default value of None</span>
<span class="sd">                  if a label is specified.</span>
<span class="sd">                * The label for the action. This field should typically be marked</span>
<span class="sd">                  for translation, see the set_translation_domain() method. Optional</span>
<span class="sd">                  with a default value of None if a stock id is specified.</span>
<span class="sd">                * The accelerator for the action, in the format understood by the</span>
<span class="sd">                  gtk.accelerator_parse() function. Optional with a default value of</span>
<span class="sd">                  None.</span>
<span class="sd">                * The tooltip for the action. This field should typically be marked</span>
<span class="sd">                  for translation, see the set_translation_domain() method. Optional</span>
<span class="sd">                  with a default value of None.</span>
<span class="sd">                * The callback function invoked when the action is activated.</span>
<span class="sd">                  Optional with a default value of None.</span>

<span class="sd">            The &quot;activate&quot; signals of the actions are connected to the callbacks and</span>
<span class="sd">            their accel paths are set to &lt;Actions&gt;/group-name/action-name.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="nb">iter</span><span class="p">(</span><span class="n">entries</span><span class="p">)</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;entries must be iterable&#39;</span><span class="p">)</span>

            <span class="k">def</span> <span class="nf">_process_action</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">stock_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">accelerator</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tooltip</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
                <span class="n">action</span> <span class="o">=</span> <span class="n">Action</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span> <span class="n">tooltip</span><span class="o">=</span><span class="n">tooltip</span><span class="p">,</span> <span class="n">stock_id</span><span class="o">=</span><span class="n">stock_id</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">callback</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">user_data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">action</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;activate&#39;</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">action</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;activate&#39;</span><span class="p">,</span> <span class="n">callback</span><span class="p">,</span> <span class="n">user_data</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">add_action_with_accel</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">accelerator</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">entries</span><span class="p">:</span>
                <span class="c1"># using inner function above since entries can leave out optional arguments</span>
                <span class="n">_process_action</span><span class="p">(</span><span class="o">*</span><span class="n">e</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">add_toggle_actions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entries</span><span class="p">,</span> <span class="n">user_data</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            The add_toggle_actions() method is a convenience method that creates a</span>
<span class="sd">            number of gtk.ToggleAction objects based on the information in the list</span>
<span class="sd">            of action entry tuples contained in entries and adds them to the action</span>
<span class="sd">            group. The toggle action entry tuples can vary in size from one to seven</span>
<span class="sd">            items with the following information:</span>

<span class="sd">                * The name of the action. Must be specified.</span>
<span class="sd">                * The stock id for the action. Optional with a default value of None</span>
<span class="sd">                  if a label is specified.</span>
<span class="sd">                * The label for the action. This field should typically be marked</span>
<span class="sd">                  for translation, see the set_translation_domain() method. Optional</span>
<span class="sd">                  with a default value of None if a stock id is specified.</span>
<span class="sd">                * The accelerator for the action, in the format understood by the</span>
<span class="sd">                  gtk.accelerator_parse() function. Optional with a default value of</span>
<span class="sd">                  None.</span>
<span class="sd">                * The tooltip for the action. This field should typically be marked</span>
<span class="sd">                  for translation, see the set_translation_domain() method. Optional</span>
<span class="sd">                  with a default value of None.</span>
<span class="sd">                * The callback function invoked when the action is activated.</span>
<span class="sd">                  Optional with a default value of None.</span>
<span class="sd">                * A flag indicating whether the toggle action is active. Optional</span>
<span class="sd">                  with a default value of False.</span>

<span class="sd">            The &quot;activate&quot; signals of the actions are connected to the callbacks and</span>
<span class="sd">            their accel paths are set to &lt;Actions&gt;/group-name/action-name.</span>
<span class="sd">            &quot;&quot;&quot;</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="nb">iter</span><span class="p">(</span><span class="n">entries</span><span class="p">)</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;entries must be iterable&#39;</span><span class="p">)</span>

            <span class="k">def</span> <span class="nf">_process_action</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">stock_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">accelerator</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tooltip</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">is_active</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
                <span class="n">action</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">ToggleAction</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span> <span class="n">tooltip</span><span class="o">=</span><span class="n">tooltip</span><span class="p">,</span> <span class="n">stock_id</span><span class="o">=</span><span class="n">stock_id</span><span class="p">)</span>
                <span class="n">action</span><span class="o">.</span><span class="n">set_active</span><span class="p">(</span><span class="n">is_active</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">callback</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">user_data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">action</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;activate&#39;</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">action</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;activate&#39;</span><span class="p">,</span> <span class="n">callback</span><span class="p">,</span> <span class="n">user_data</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">add_action_with_accel</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">accelerator</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">entries</span><span class="p">:</span>
                <span class="c1"># using inner function above since entries can leave out optional arguments</span>
                <span class="n">_process_action</span><span class="p">(</span><span class="o">*</span><span class="n">e</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">add_radio_actions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entries</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">on_change</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">user_data</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            The add_radio_actions() method is a convenience method that creates a</span>
<span class="sd">            number of gtk.RadioAction objects based on the information in the list</span>
<span class="sd">            of action entry tuples contained in entries and adds them to the action</span>
<span class="sd">            group. The entry tuples can vary in size from one to six items with the</span>
<span class="sd">            following information:</span>

<span class="sd">                * The name of the action. Must be specified.</span>
<span class="sd">                * The stock id for the action. Optional with a default value of None</span>
<span class="sd">                  if a label is specified.</span>
<span class="sd">                * The label for the action. This field should typically be marked</span>
<span class="sd">                  for translation, see the set_translation_domain() method. Optional</span>
<span class="sd">                  with a default value of None if a stock id is specified.</span>
<span class="sd">                * The accelerator for the action, in the format understood by the</span>
<span class="sd">                  gtk.accelerator_parse() function. Optional with a default value of</span>
<span class="sd">                  None.</span>
<span class="sd">                * The tooltip for the action. This field should typically be marked</span>
<span class="sd">                  for translation, see the set_translation_domain() method. Optional</span>
<span class="sd">                  with a default value of None.</span>
<span class="sd">                * The value to set on the radio action. Optional with a default</span>
<span class="sd">                  value of 0. Should be specified in applications.</span>

<span class="sd">            The value parameter specifies the radio action that should be set</span>
<span class="sd">            active. The &quot;changed&quot; signal of the first radio action is connected to</span>
<span class="sd">            the on_change callback (if specified and not None) and the accel paths</span>
<span class="sd">            of the actions are set to &lt;Actions&gt;/group-name/action-name.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="nb">iter</span><span class="p">(</span><span class="n">entries</span><span class="p">)</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;entries must be iterable&#39;</span><span class="p">)</span>

            <span class="n">first_action</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="k">def</span> <span class="nf">_process_action</span><span class="p">(</span><span class="n">group_source</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">stock_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">accelerator</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tooltip</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">entry_value</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
                <span class="n">action</span> <span class="o">=</span> <span class="n">RadioAction</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span> <span class="n">tooltip</span><span class="o">=</span><span class="n">tooltip</span><span class="p">,</span> <span class="n">stock_id</span><span class="o">=</span><span class="n">stock_id</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">entry_value</span><span class="p">)</span>

                <span class="c1"># FIXME: join_group is a patch to Gtk+ 3.0</span>
                <span class="c1">#        otherwise we can&#39;t effectively add radio actions to a</span>
                <span class="c1">#        group.  Should we depend on 3.0 and error out here</span>
                <span class="c1">#        or should we offer the functionality via a compat</span>
                <span class="c1">#        C module?</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="s1">&#39;join_group&#39;</span><span class="p">):</span>
                    <span class="n">action</span><span class="o">.</span><span class="n">join_group</span><span class="p">(</span><span class="n">group_source</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="n">entry_value</span><span class="p">:</span>
                    <span class="n">action</span><span class="o">.</span><span class="n">set_active</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">add_action_with_accel</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">accelerator</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">action</span>

            <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">entries</span><span class="p">:</span>
                <span class="c1"># using inner function above since entries can leave out optional arguments</span>
                <span class="n">action</span> <span class="o">=</span> <span class="n">_process_action</span><span class="p">(</span><span class="n">first_action</span><span class="p">,</span> <span class="o">*</span><span class="n">e</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">first_action</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">first_action</span> <span class="o">=</span> <span class="n">action</span>

            <span class="k">if</span> <span class="n">first_action</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">on_change</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">user_data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">first_action</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;changed&#39;</span><span class="p">,</span> <span class="n">on_change</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">first_action</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;changed&#39;</span><span class="p">,</span> <span class="n">on_change</span><span class="p">,</span> <span class="n">user_data</span><span class="p">)</span>

    <span class="n">ActionGroup</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">ActionGroup</span><span class="p">)</span>
    <span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;ActionGroup&#39;</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">UIManager</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">UIManager</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">add_ui_from_string</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">buffer</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="n">string_types</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;buffer must be a string&#39;</span><span class="p">)</span>

            <span class="n">length</span> <span class="o">=</span> <span class="n">_get_utf8_length</span><span class="p">(</span><span class="n">buffer</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">UIManager</span><span class="o">.</span><span class="n">add_ui_from_string</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">buffer</span><span class="p">,</span> <span class="n">length</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">insert_action_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">buffer</span><span class="p">,</span> <span class="n">length</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">UIManager</span><span class="o">.</span><span class="n">insert_action_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">buffer</span><span class="p">,</span> <span class="n">length</span><span class="p">)</span>

    <span class="n">UIManager</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">UIManager</span><span class="p">)</span>
    <span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;UIManager&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">ComboBox</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">ComboBox</span><span class="p">,</span> <span class="n">Container</span><span class="p">):</span>
    <span class="n">get_active_iter</span> <span class="o">=</span> <span class="n">strip_boolean_result</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">ComboBox</span><span class="o">.</span><span class="n">get_active_iter</span><span class="p">)</span>


<span class="n">ComboBox</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">ComboBox</span><span class="p">)</span>
<span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;ComboBox&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Box</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">Box</span><span class="p">):</span>
    <span class="fm">__init__</span> <span class="o">=</span> <span class="n">deprecated_init</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">Box</span><span class="o">.</span><span class="fm">__init__</span><span class="p">,</span>
                               <span class="n">arg_names</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;homogeneous&#39;</span><span class="p">,</span> <span class="s1">&#39;spacing&#39;</span><span class="p">),</span>
                               <span class="n">category</span><span class="o">=</span><span class="n">PyGTKDeprecationWarning</span><span class="p">)</span>


<span class="n">Box</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">Box</span><span class="p">)</span>
<span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Box&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">SizeGroup</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">SizeGroup</span><span class="p">):</span>
    <span class="fm">__init__</span> <span class="o">=</span> <span class="n">deprecated_init</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">SizeGroup</span><span class="o">.</span><span class="fm">__init__</span><span class="p">,</span>
                               <span class="n">arg_names</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;mode&#39;</span><span class="p">,),</span>
                               <span class="n">deprecated_defaults</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">SizeGroupMode</span><span class="o">.</span><span class="n">VERTICAL</span><span class="p">},</span>
                               <span class="n">category</span><span class="o">=</span><span class="n">PyGTKDeprecationWarning</span><span class="p">)</span>


<span class="n">SizeGroup</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">SizeGroup</span><span class="p">)</span>
<span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;SizeGroup&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">MenuItem</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">MenuItem</span><span class="p">):</span>
    <span class="fm">__init__</span> <span class="o">=</span> <span class="n">deprecated_init</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">MenuItem</span><span class="o">.</span><span class="fm">__init__</span><span class="p">,</span>
                               <span class="n">arg_names</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;label&#39;</span><span class="p">,),</span>
                               <span class="n">category</span><span class="o">=</span><span class="n">PyGTKDeprecationWarning</span><span class="p">)</span>


<span class="n">MenuItem</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">MenuItem</span><span class="p">)</span>
<span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;MenuItem&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_get_utf8_length</span><span class="p">(</span><span class="n">string</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">string</span><span class="p">,</span> <span class="n">string_types</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;must be a string&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">string</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
        <span class="n">string</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Builder</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">Builder</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">connect_signals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj_or_map</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Connect signals specified by this builder to a name, handler mapping.</span>

<span class="sd">        Connect signal, name, and handler sets specified in the builder with</span>
<span class="sd">        the given mapping &quot;obj_or_map&quot;. The handler/value aspect of the mapping</span>
<span class="sd">        can also contain a tuple in the form of (handler [,arg1 [,argN]])</span>
<span class="sd">        allowing for extra arguments to be passed to the handler. For example:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            builder.connect_signals({&#39;on_clicked&#39;: (on_clicked, arg1, arg2)})</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect_signals_full</span><span class="p">(</span><span class="n">_builder_connect_callback</span><span class="p">,</span> <span class="n">obj_or_map</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_from_string</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">buffer</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="n">string_types</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;buffer must be a string&#39;</span><span class="p">)</span>

        <span class="n">length</span> <span class="o">=</span> <span class="n">_get_utf8_length</span><span class="p">(</span><span class="n">buffer</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">Builder</span><span class="o">.</span><span class="n">add_from_string</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">buffer</span><span class="p">,</span> <span class="n">length</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_objects_from_string</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">buffer</span><span class="p">,</span> <span class="n">object_ids</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="n">string_types</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;buffer must be a string&#39;</span><span class="p">)</span>

        <span class="n">length</span> <span class="o">=</span> <span class="n">_get_utf8_length</span><span class="p">(</span><span class="n">buffer</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">Builder</span><span class="o">.</span><span class="n">add_objects_from_string</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">buffer</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="n">object_ids</span><span class="p">)</span>


<span class="n">Builder</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">Builder</span><span class="p">)</span>
<span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Builder&#39;</span><span class="p">)</span>


<span class="c1"># NOTE: This must come before any other Window/Dialog subclassing, to ensure</span>
<span class="c1"># that we have a correct inheritance hierarchy.</span>


<span class="k">class</span> <span class="nc">Window</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">Window</span><span class="p">):</span>
    <span class="fm">__init__</span> <span class="o">=</span> <span class="n">deprecated_init</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">Window</span><span class="o">.</span><span class="fm">__init__</span><span class="p">,</span>
                               <span class="n">arg_names</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,),</span>
                               <span class="n">category</span><span class="o">=</span><span class="n">PyGTKDeprecationWarning</span><span class="p">)</span>


<span class="n">Window</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">Window</span><span class="p">)</span>
<span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Window&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Dialog</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">Dialog</span><span class="p">,</span> <span class="n">Container</span><span class="p">):</span>
    <span class="n">_old_arg_names</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;parent&#39;</span><span class="p">,</span> <span class="s1">&#39;flags&#39;</span><span class="p">,</span> <span class="s1">&#39;buttons&#39;</span><span class="p">,</span> <span class="s1">&#39;_buttons_property&#39;</span><span class="p">)</span>
    <span class="n">_init</span> <span class="o">=</span> <span class="n">deprecated_init</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">Dialog</span><span class="o">.</span><span class="fm">__init__</span><span class="p">,</span>
                            <span class="n">arg_names</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;transient_for&#39;</span><span class="p">,</span> <span class="s1">&#39;flags&#39;</span><span class="p">,</span>
                                       <span class="s1">&#39;add_buttons&#39;</span><span class="p">,</span> <span class="s1">&#39;buttons&#39;</span><span class="p">),</span>
                            <span class="n">ignore</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;flags&#39;</span><span class="p">,</span> <span class="s1">&#39;add_buttons&#39;</span><span class="p">),</span>
                            <span class="n">deprecated_aliases</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;transient_for&#39;</span><span class="p">:</span> <span class="s1">&#39;parent&#39;</span><span class="p">,</span>
                                                <span class="s1">&#39;buttons&#39;</span><span class="p">:</span> <span class="s1">&#39;_buttons_property&#39;</span><span class="p">},</span>
                            <span class="n">category</span><span class="o">=</span><span class="n">PyGTKDeprecationWarning</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

        <span class="n">new_kwargs</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">old_kwargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_old_arg_names</span><span class="p">,</span> <span class="n">args</span><span class="p">))</span>
        <span class="n">old_kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="c1"># Increment the warning stacklevel for sub-classes which implement their own __init__.</span>
        <span class="n">stacklevel</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">!=</span> <span class="n">Dialog</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="fm">__init__</span> <span class="o">!=</span> <span class="n">Dialog</span><span class="o">.</span><span class="fm">__init__</span><span class="p">:</span>
            <span class="n">stacklevel</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c1"># buttons was overloaded by PyGtk but is needed for Gtk.MessageDialog</span>
        <span class="c1"># as a pass through, so type check the argument and give a deprecation</span>
        <span class="c1"># when it is not of type Gtk.ButtonsType</span>
        <span class="n">add_buttons</span> <span class="o">=</span> <span class="n">old_kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;buttons&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">add_buttons</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">add_buttons</span><span class="p">,</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">ButtonsType</span><span class="p">):</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">&#39;The &quot;buttons&quot; argument must be a Gtk.ButtonsType enum value. &#39;</span>
                          <span class="s1">&#39;Please use the &quot;add_buttons&quot; method for adding buttons. &#39;</span>
                          <span class="s1">&#39;See: https://wiki.gnome.org/PyGObject/InitializerDeprecations&#39;</span><span class="p">,</span>
                          <span class="n">PyGTKDeprecationWarning</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="n">stacklevel</span><span class="p">)</span>
            <span class="k">if</span> <span class="s1">&#39;buttons&#39;</span> <span class="ow">in</span> <span class="n">new_kwargs</span><span class="p">:</span>
                <span class="k">del</span> <span class="n">new_kwargs</span><span class="p">[</span><span class="s1">&#39;buttons&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">add_buttons</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">flags</span> <span class="o">=</span> <span class="n">old_kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;flags&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">flags</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">&#39;The &quot;flags&quot; argument for dialog construction is deprecated. &#39;</span>
                          <span class="s1">&#39;Please use initializer keywords: modal=True and/or destroy_with_parent=True. &#39;</span>
                          <span class="s1">&#39;See: https://wiki.gnome.org/PyGObject/InitializerDeprecations&#39;</span><span class="p">,</span>
                          <span class="n">PyGTKDeprecationWarning</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="n">stacklevel</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">flags</span> <span class="o">&amp;</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">DialogFlags</span><span class="o">.</span><span class="n">MODAL</span><span class="p">:</span>
                <span class="n">new_kwargs</span><span class="p">[</span><span class="s1">&#39;modal&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

            <span class="k">if</span> <span class="n">flags</span> <span class="o">&amp;</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">DialogFlags</span><span class="o">.</span><span class="n">DESTROY_WITH_PARENT</span><span class="p">:</span>
                <span class="n">new_kwargs</span><span class="p">[</span><span class="s1">&#39;destroy_with_parent&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_init</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">new_kwargs</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">add_buttons</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_buttons</span><span class="p">(</span><span class="o">*</span><span class="n">add_buttons</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">with</span> <span class="n">register_sigint_fallback</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">destroy</span><span class="p">):</span>
            <span class="k">with</span> <span class="n">wakeup_on_signal</span><span class="p">():</span>
                <span class="k">return</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">Dialog</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="n">action_area</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">dialog</span><span class="p">:</span> <span class="n">dialog</span><span class="o">.</span><span class="n">get_action_area</span><span class="p">())</span>
    <span class="n">vbox</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="k">lambda</span> <span class="n">dialog</span><span class="p">:</span> <span class="n">dialog</span><span class="o">.</span><span class="n">get_content_area</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">add_buttons</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The add_buttons() method adds several buttons to the Gtk.Dialog using</span>
<span class="sd">        the button data passed as arguments to the method. This method is the</span>
<span class="sd">        same as calling the Gtk.Dialog.add_button() repeatedly. The button data</span>
<span class="sd">        pairs - button text (or stock ID) and a response ID integer are passed</span>
<span class="sd">        individually. For example:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            dialog.add_buttons(Gtk.STOCK_OPEN, 42, &quot;Close&quot;, Gtk.ResponseType.CLOSE)</span>

<span class="sd">        will add &quot;Open&quot; and &quot;Close&quot; buttons to dialog.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">def</span> <span class="nf">_button</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
            <span class="k">while</span> <span class="n">b</span><span class="p">:</span>
                <span class="n">t</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
                <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>
                <span class="k">yield</span> <span class="n">t</span><span class="p">,</span> <span class="n">r</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">text</span><span class="p">,</span> <span class="n">response</span> <span class="ow">in</span> <span class="n">_button</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_button</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">IndexError</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Must pass an even number of arguments&#39;</span><span class="p">)</span>


<span class="n">Dialog</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">Dialog</span><span class="p">)</span>
<span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Dialog&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">MessageDialog</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">MessageDialog</span><span class="p">,</span> <span class="n">Dialog</span><span class="p">):</span>
    <span class="fm">__init__</span> <span class="o">=</span> <span class="n">deprecated_init</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">MessageDialog</span><span class="o">.</span><span class="fm">__init__</span><span class="p">,</span>
                               <span class="n">arg_names</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;parent&#39;</span><span class="p">,</span> <span class="s1">&#39;flags&#39;</span><span class="p">,</span> <span class="s1">&#39;message_type&#39;</span><span class="p">,</span>
                                          <span class="s1">&#39;buttons&#39;</span><span class="p">,</span> <span class="s1">&#39;message_format&#39;</span><span class="p">),</span>
                               <span class="n">deprecated_aliases</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;text&#39;</span><span class="p">:</span> <span class="s1">&#39;message_format&#39;</span><span class="p">,</span>
                                                   <span class="s1">&#39;message_type&#39;</span><span class="p">:</span> <span class="s1">&#39;type&#39;</span><span class="p">},</span>
                               <span class="n">category</span><span class="o">=</span><span class="n">PyGTKDeprecationWarning</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">format_secondary_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message_format</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s1">&#39;secondary-use-markup&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s1">&#39;secondary-text&#39;</span><span class="p">,</span> <span class="n">message_format</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">format_secondary_markup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message_format</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s1">&#39;secondary-use-markup&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s1">&#39;secondary-text&#39;</span><span class="p">,</span> <span class="n">message_format</span><span class="p">)</span>


<span class="n">MessageDialog</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">MessageDialog</span><span class="p">)</span>
<span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;MessageDialog&#39;</span><span class="p">)</span>


<span class="k">if</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">_version</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span> <span class="s2">&quot;3.0&quot;</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">ColorSelectionDialog</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">ColorSelectionDialog</span><span class="p">):</span>
        <span class="fm">__init__</span> <span class="o">=</span> <span class="n">deprecated_init</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">ColorSelectionDialog</span><span class="o">.</span><span class="fm">__init__</span><span class="p">,</span>
                                   <span class="n">arg_names</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,),</span>
                                   <span class="n">category</span><span class="o">=</span><span class="n">PyGTKDeprecationWarning</span><span class="p">)</span>

    <span class="n">ColorSelectionDialog</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">ColorSelectionDialog</span><span class="p">)</span>
    <span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;ColorSelectionDialog&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">FileChooserDialog</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">FileChooserDialog</span><span class="p">):</span>
    <span class="fm">__init__</span> <span class="o">=</span> <span class="n">deprecated_init</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">FileChooserDialog</span><span class="o">.</span><span class="fm">__init__</span><span class="p">,</span>
                               <span class="n">arg_names</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;parent&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span><span class="p">,</span> <span class="s1">&#39;buttons&#39;</span><span class="p">),</span>
                               <span class="n">category</span><span class="o">=</span><span class="n">PyGTKDeprecationWarning</span><span class="p">)</span>


<span class="n">FileChooserDialog</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">FileChooserDialog</span><span class="p">)</span>
<span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;FileChooserDialog&#39;</span><span class="p">)</span>


<span class="k">if</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">_version</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span> <span class="s2">&quot;3.0&quot;</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">FontSelectionDialog</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">FontSelectionDialog</span><span class="p">):</span>
        <span class="fm">__init__</span> <span class="o">=</span> <span class="n">deprecated_init</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">FontSelectionDialog</span><span class="o">.</span><span class="fm">__init__</span><span class="p">,</span>
                                   <span class="n">arg_names</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,),</span>
                                   <span class="n">category</span><span class="o">=</span><span class="n">PyGTKDeprecationWarning</span><span class="p">)</span>

    <span class="n">FontSelectionDialog</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">FontSelectionDialog</span><span class="p">)</span>
    <span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;FontSelectionDialog&#39;</span><span class="p">)</span>


<span class="k">if</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">_version</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span> <span class="s2">&quot;3.0&quot;</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">RecentChooserDialog</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">RecentChooserDialog</span><span class="p">):</span>
        <span class="c1"># Note, the &quot;manager&quot; keyword must work across the entire 3.x series because</span>
        <span class="c1"># &quot;recent_manager&quot; is not backwards compatible with PyGObject versions prior to 3.10.</span>
        <span class="fm">__init__</span> <span class="o">=</span> <span class="n">deprecated_init</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">RecentChooserDialog</span><span class="o">.</span><span class="fm">__init__</span><span class="p">,</span>
                                   <span class="n">arg_names</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;parent&#39;</span><span class="p">,</span> <span class="s1">&#39;recent_manager&#39;</span><span class="p">,</span> <span class="s1">&#39;buttons&#39;</span><span class="p">),</span>
                                   <span class="n">deprecated_aliases</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;recent_manager&#39;</span><span class="p">:</span> <span class="s1">&#39;manager&#39;</span><span class="p">},</span>
                                   <span class="n">category</span><span class="o">=</span><span class="n">PyGTKDeprecationWarning</span><span class="p">)</span>

    <span class="n">RecentChooserDialog</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">RecentChooserDialog</span><span class="p">)</span>
    <span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;RecentChooserDialog&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">IconView</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">IconView</span><span class="p">):</span>
    <span class="fm">__init__</span> <span class="o">=</span> <span class="n">deprecated_init</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">IconView</span><span class="o">.</span><span class="fm">__init__</span><span class="p">,</span>
                               <span class="n">arg_names</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;model&#39;</span><span class="p">,),</span>
                               <span class="n">category</span><span class="o">=</span><span class="n">PyGTKDeprecationWarning</span><span class="p">)</span>

    <span class="n">get_item_at_pos</span> <span class="o">=</span> <span class="n">strip_boolean_result</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">IconView</span><span class="o">.</span><span class="n">get_item_at_pos</span><span class="p">)</span>
    <span class="n">get_visible_range</span> <span class="o">=</span> <span class="n">strip_boolean_result</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">IconView</span><span class="o">.</span><span class="n">get_visible_range</span><span class="p">)</span>
    <span class="n">get_dest_item_at_pos</span> <span class="o">=</span> <span class="n">strip_boolean_result</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">IconView</span><span class="o">.</span><span class="n">get_dest_item_at_pos</span><span class="p">)</span>


<span class="n">IconView</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">IconView</span><span class="p">)</span>
<span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;IconView&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">ToolButton</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">ToolButton</span><span class="p">):</span>
    <span class="fm">__init__</span> <span class="o">=</span> <span class="n">deprecated_init</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">ToolButton</span><span class="o">.</span><span class="fm">__init__</span><span class="p">,</span>
                               <span class="n">arg_names</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;stock_id&#39;</span><span class="p">,),</span>
                               <span class="n">category</span><span class="o">=</span><span class="n">PyGTKDeprecationWarning</span><span class="p">)</span>


<span class="n">ToolButton</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">ToolButton</span><span class="p">)</span>
<span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;ToolButton&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">IMContext</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">IMContext</span><span class="p">):</span>
    <span class="n">get_surrounding</span> <span class="o">=</span> <span class="n">strip_boolean_result</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">IMContext</span><span class="o">.</span><span class="n">get_surrounding</span><span class="p">)</span>


<span class="n">IMContext</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">IMContext</span><span class="p">)</span>
<span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;IMContext&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">RecentInfo</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">RecentInfo</span><span class="p">):</span>
    <span class="n">get_application_info</span> <span class="o">=</span> <span class="n">strip_boolean_result</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">RecentInfo</span><span class="o">.</span><span class="n">get_application_info</span><span class="p">)</span>


<span class="n">RecentInfo</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">RecentInfo</span><span class="p">)</span>
<span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;RecentInfo&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">TextBuffer</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">TextBuffer</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">_get_or_create_tag_table</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_tag_table</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">table</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">table</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">TextTagTable</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_tag_table</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">table</span>

    <span class="k">def</span> <span class="nf">create_tag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tag_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">properties</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Creates a tag and adds it to the tag table of the TextBuffer.</span>

<span class="sd">        :param str tag_name:</span>
<span class="sd">            Name of the new tag, or None</span>
<span class="sd">        :param **properties:</span>
<span class="sd">            Keyword list of properties and their values</span>

<span class="sd">        This is equivalent to creating a Gtk.TextTag and then adding the</span>
<span class="sd">        tag to the buffer&#39;s tag table. The returned tag is owned by</span>
<span class="sd">        the buffer&#39;s tag table.</span>

<span class="sd">        If ``tag_name`` is None, the tag is anonymous.</span>

<span class="sd">        If ``tag_name`` is not None, a tag called ``tag_name`` must not already</span>
<span class="sd">        exist in the tag table for this buffer.</span>

<span class="sd">        Properties are passed as a keyword list of names and values (e.g.</span>
<span class="sd">        foreground=&#39;DodgerBlue&#39;, weight=Pango.Weight.BOLD)</span>

<span class="sd">        :returns:</span>
<span class="sd">            A new tag.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">tag</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">TextTag</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">tag_name</span><span class="p">,</span> <span class="o">**</span><span class="n">properties</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_get_or_create_tag_table</span><span class="p">()</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">tag</span>

    <span class="k">def</span> <span class="nf">create_mark</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mark_name</span><span class="p">,</span> <span class="n">where</span><span class="p">,</span> <span class="n">left_gravity</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">TextBuffer</span><span class="o">.</span><span class="n">create_mark</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mark_name</span><span class="p">,</span> <span class="n">where</span><span class="p">,</span> <span class="n">left_gravity</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">length</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">Gtk</span><span class="o">.</span><span class="n">TextBuffer</span><span class="o">.</span><span class="n">set_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">length</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">iter</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">length</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">string_types</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;text must be a string, not </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">type</span><span class="p">(</span><span class="n">text</span><span class="p">))</span>

        <span class="n">Gtk</span><span class="o">.</span><span class="n">TextBuffer</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">iter</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">length</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">insert_with_tags</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">iter</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="o">*</span><span class="n">tags</span><span class="p">):</span>
        <span class="n">start_offset</span> <span class="o">=</span> <span class="nb">iter</span><span class="o">.</span><span class="n">get_offset</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="nb">iter</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">tags</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">start</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_iter_at_offset</span><span class="p">(</span><span class="n">start_offset</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">tags</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">apply_tag</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="nb">iter</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">insert_with_tags_by_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">iter</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="o">*</span><span class="n">tags</span><span class="p">):</span>
        <span class="n">tag_objs</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">tags</span><span class="p">:</span>
            <span class="n">tag_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_tag_table</span><span class="p">()</span><span class="o">.</span><span class="n">lookup</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">tag_obj</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;unknown text tag: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">tag</span><span class="p">)</span>
            <span class="n">tag_objs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tag_obj</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">insert_with_tags</span><span class="p">(</span><span class="nb">iter</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="o">*</span><span class="n">tag_objs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">insert_at_cursor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">length</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">string_types</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;text must be a string, not </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">type</span><span class="p">(</span><span class="n">text</span><span class="p">))</span>

        <span class="n">Gtk</span><span class="o">.</span><span class="n">TextBuffer</span><span class="o">.</span><span class="n">insert_at_cursor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">length</span><span class="p">)</span>

    <span class="n">get_selection_bounds</span> <span class="o">=</span> <span class="n">strip_boolean_result</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">TextBuffer</span><span class="o">.</span><span class="n">get_selection_bounds</span><span class="p">,</span> <span class="n">fail_ret</span><span class="o">=</span><span class="p">())</span>


<span class="n">TextBuffer</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">TextBuffer</span><span class="p">)</span>
<span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;TextBuffer&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">TextIter</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">TextIter</span><span class="p">):</span>
    <span class="n">forward_search</span> <span class="o">=</span> <span class="n">strip_boolean_result</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">TextIter</span><span class="o">.</span><span class="n">forward_search</span><span class="p">)</span>
    <span class="n">backward_search</span> <span class="o">=</span> <span class="n">strip_boolean_result</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">TextIter</span><span class="o">.</span><span class="n">backward_search</span><span class="p">)</span>


<span class="n">TextIter</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">TextIter</span><span class="p">)</span>
<span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;TextIter&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">TreeModel</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">TreeModel</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_n_children</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__bool__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="c1"># alias for Python 2.x object protocol</span>
    <span class="n">__nonzero__</span> <span class="o">=</span> <span class="fm">__bool__</span>

    <span class="k">def</span> <span class="nf">_getiter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">TreeIter</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">key</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="n">key</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">+</span> <span class="n">key</span>
            <span class="k">if</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;row index is out of bounds: </span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">key</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">aiter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_iter</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;could not find tree path &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="n">key</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">aiter</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">aiter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_iter</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;could not find tree path &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="n">key</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">aiter</span>

    <span class="k">def</span> <span class="nf">_coerce_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">TreePath</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">path</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">TreePath</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="n">aiter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getiter</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">TreeModelRow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">aiter</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">row</span> <span class="o">=</span> <span class="bp">self</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_row</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">iter</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__delitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="n">aiter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getiter</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">aiter</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">TreeModelRowIter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_iter_first</span><span class="p">())</span>

    <span class="n">get_iter_first</span> <span class="o">=</span> <span class="n">strip_boolean_result</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">TreeModel</span><span class="o">.</span><span class="n">get_iter_first</span><span class="p">)</span>
    <span class="n">iter_children</span> <span class="o">=</span> <span class="n">strip_boolean_result</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">TreeModel</span><span class="o">.</span><span class="n">iter_children</span><span class="p">)</span>
    <span class="n">iter_nth_child</span> <span class="o">=</span> <span class="n">strip_boolean_result</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">TreeModel</span><span class="o">.</span><span class="n">iter_nth_child</span><span class="p">)</span>
    <span class="n">iter_parent</span> <span class="o">=</span> <span class="n">strip_boolean_result</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">TreeModel</span><span class="o">.</span><span class="n">iter_parent</span><span class="p">)</span>
    <span class="n">get_iter_from_string</span> <span class="o">=</span> <span class="n">strip_boolean_result</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">TreeModel</span><span class="o">.</span><span class="n">get_iter_from_string</span><span class="p">,</span>
                                                <span class="ne">ValueError</span><span class="p">,</span> <span class="s1">&#39;invalid tree path&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_iter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coerce_path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="n">success</span><span class="p">,</span> <span class="n">aiter</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">TreeModel</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_iter</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;invalid tree path &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="n">path</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">aiter</span>

    <span class="k">def</span> <span class="nf">iter_next</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">aiter</span><span class="p">):</span>
        <span class="n">next_iter</span> <span class="o">=</span> <span class="n">aiter</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">success</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">TreeModel</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">iter_next</span><span class="p">(</span><span class="n">next_iter</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">success</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">next_iter</span>

    <span class="k">def</span> <span class="nf">iter_previous</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">aiter</span><span class="p">):</span>
        <span class="n">prev_iter</span> <span class="o">=</span> <span class="n">aiter</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">success</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">TreeModel</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">iter_previous</span><span class="p">(</span><span class="n">prev_iter</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">success</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">prev_iter</span>

    <span class="k">def</span> <span class="nf">_convert_row</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">):</span>
        <span class="c1"># TODO: Accept a dictionary for row</span>
        <span class="c1"># model.append(None,{COLUMN_ICON: icon, COLUMN_NAME: name})</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Expected a list or tuple, but got str&#39;</span><span class="p">)</span>

        <span class="n">n_columns</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_n_columns</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">row</span><span class="p">)</span> <span class="o">!=</span> <span class="n">n_columns</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;row sequence has the incorrect number of elements&#39;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">columns</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">cur_col</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
            <span class="c1"># do not try to set None values, they are causing warnings</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_convert_value</span><span class="p">(</span><span class="n">cur_col</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
            <span class="n">columns</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cur_col</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">columns</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_row</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">treeiter</span><span class="p">,</span> <span class="n">row</span><span class="p">):</span>
        <span class="n">converted_row</span><span class="p">,</span> <span class="n">columns</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_row</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="n">column</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">continue</span>  <span class="c1"># None means skip this row</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">treeiter</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_convert_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Convert value to a GObject.Value of the expected type&#39;&#39;&#39;</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">GObject</span><span class="o">.</span><span class="n">Value</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">value</span>
        <span class="k">return</span> <span class="n">GObject</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_column_type</span><span class="p">(</span><span class="n">column</span><span class="p">),</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">treeiter</span><span class="p">,</span> <span class="o">*</span><span class="n">columns</span><span class="p">):</span>
        <span class="n">n_columns</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_n_columns</span><span class="p">()</span>

        <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;column numbers must be ints&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">col</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">col</span> <span class="o">&gt;=</span> <span class="n">n_columns</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;column number is out of range&quot;</span><span class="p">)</span>

            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">treeiter</span><span class="p">,</span> <span class="n">col</span><span class="p">))</span>

        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>

    <span class="c1">#</span>
    <span class="c1"># Signals supporting python iterables as tree paths</span>
    <span class="c1">#</span>
    <span class="k">def</span> <span class="nf">row_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="nb">iter</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">TreeModel</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">row_changed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_coerce_path</span><span class="p">(</span><span class="n">path</span><span class="p">),</span> <span class="nb">iter</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">row_inserted</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="nb">iter</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">TreeModel</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">row_inserted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_coerce_path</span><span class="p">(</span><span class="n">path</span><span class="p">),</span> <span class="nb">iter</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">row_has_child_toggled</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="nb">iter</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">TreeModel</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">row_has_child_toggled</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_coerce_path</span><span class="p">(</span><span class="n">path</span><span class="p">),</span>
                                                            <span class="nb">iter</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">row_deleted</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">TreeModel</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">row_deleted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_coerce_path</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">rows_reordered</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="nb">iter</span><span class="p">,</span> <span class="n">new_order</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">TreeModel</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">rows_reordered</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_coerce_path</span><span class="p">(</span><span class="n">path</span><span class="p">),</span>
                                                     <span class="nb">iter</span><span class="p">,</span> <span class="n">new_order</span><span class="p">)</span>


<span class="n">TreeModel</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">TreeModel</span><span class="p">)</span>
<span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;TreeModel&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">TreeSortable</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">TreeSortable</span><span class="p">,</span> <span class="p">):</span>

    <span class="n">get_sort_column_id</span> <span class="o">=</span> <span class="n">strip_boolean_result</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">TreeSortable</span><span class="o">.</span><span class="n">get_sort_column_id</span><span class="p">,</span> <span class="n">fail_ret</span><span class="o">=</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">set_sort_func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sort_column_id</span><span class="p">,</span> <span class="n">sort_func</span><span class="p">,</span> <span class="n">user_data</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">TreeSortable</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">set_sort_func</span><span class="p">(</span><span class="n">sort_column_id</span><span class="p">,</span> <span class="n">sort_func</span><span class="p">,</span> <span class="n">user_data</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_default_sort_func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sort_func</span><span class="p">,</span> <span class="n">user_data</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">TreeSortable</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">set_default_sort_func</span><span class="p">(</span><span class="n">sort_func</span><span class="p">,</span> <span class="n">user_data</span><span class="p">)</span>


<span class="n">TreeSortable</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">TreeSortable</span><span class="p">)</span>
<span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;TreeSortable&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">TreeModelSort</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">TreeModelSort</span><span class="p">):</span>
    <span class="fm">__init__</span> <span class="o">=</span> <span class="n">deprecated_init</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">TreeModelSort</span><span class="o">.</span><span class="fm">__init__</span><span class="p">,</span>
                               <span class="n">arg_names</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;model&#39;</span><span class="p">,),</span>
                               <span class="n">category</span><span class="o">=</span><span class="n">PyGTKDeprecationWarning</span><span class="p">)</span>


<span class="n">TreeModelSort</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">TreeModelSort</span><span class="p">)</span>
<span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;TreeModelSort&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">ListStore</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">ListStore</span><span class="p">,</span> <span class="n">TreeModel</span><span class="p">,</span> <span class="n">TreeSortable</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">column_types</span><span class="p">):</span>
        <span class="n">Gtk</span><span class="o">.</span><span class="n">ListStore</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_column_types</span><span class="p">(</span><span class="n">column_types</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_do_insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">row</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">row</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">row</span><span class="p">,</span> <span class="n">columns</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_row</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
            <span class="n">treeiter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">insert_with_valuesv</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">columns</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">treeiter</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">ListStore</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">treeiter</span>

    <span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">row</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_insert</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span>
        <span class="c1"># gtk_list_store_insert() does not know about the &quot;position == -1&quot;</span>
        <span class="c1"># case, so use append() here</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">ListStore</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">prepend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_insert</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">insert_before</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sibling</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">row</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">sibling</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">position</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="n">sibling</span><span class="p">)</span><span class="o">.</span><span class="n">get_indices</span><span class="p">()[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_insert</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">ListStore</span><span class="o">.</span><span class="n">insert_before</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sibling</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">insert_after</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sibling</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">row</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">sibling</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">position</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="n">sibling</span><span class="p">)</span><span class="o">.</span><span class="n">get_indices</span><span class="p">()[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_insert</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">ListStore</span><span class="o">.</span><span class="n">insert_after</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sibling</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">treeiter</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_value</span><span class="p">(</span><span class="n">column</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="n">Gtk</span><span class="o">.</span><span class="n">ListStore</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">treeiter</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">treeiter</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">_set_lists</span><span class="p">(</span><span class="n">cols</span><span class="p">,</span> <span class="n">vals</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">cols</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">vals</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;The number of columns do not match the number of values&#39;</span><span class="p">)</span>

            <span class="n">columns</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">col_num</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">cols</span><span class="p">,</span> <span class="n">vals</span><span class="p">):</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">col_num</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;TypeError: Expected integer argument for column.&#39;</span><span class="p">)</span>

                <span class="n">columns</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">col_num</span><span class="p">)</span>
                <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_convert_value</span><span class="p">(</span><span class="n">col_num</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>

            <span class="n">Gtk</span><span class="o">.</span><span class="n">ListStore</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">treeiter</span><span class="p">,</span> <span class="n">columns</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">args</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">int</span><span class="p">):</span>
                <span class="n">_set_lists</span><span class="p">(</span><span class="n">args</span><span class="p">[::</span><span class="mi">2</span><span class="p">],</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">::</span><span class="mi">2</span><span class="p">])</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="nb">list</span><span class="p">)):</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Too many arguments&#39;</span><span class="p">)</span>
                <span class="n">_set_lists</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="n">_set_lists</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Argument list must be in the form of (column, value, ...), ((columns,...), (values, ...)) or {column: value}.  No -1 termination is needed.&#39;</span><span class="p">)</span>


<span class="n">ListStore</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">ListStore</span><span class="p">)</span>
<span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;ListStore&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">TreeModelRow</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">iter_or_path</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">TreeModel</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;expected Gtk.TreeModel, </span><span class="si">%s</span><span class="s2"> found&quot;</span> <span class="o">%</span> <span class="nb">type</span><span class="p">(</span><span class="n">model</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">iter_or_path</span><span class="p">,</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">TreePath</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">iter</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">get_iter</span><span class="p">(</span><span class="n">iter_or_path</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">iter_or_path</span><span class="p">,</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">TreeIter</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">iter</span> <span class="o">=</span> <span class="n">iter_or_path</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;expected Gtk.TreeIter or Gtk.TreePath, </span><span class="se">\</span>
<span class="s2">                </span><span class="si">%s</span><span class="s2"> found&quot;</span> <span class="o">%</span> <span class="nb">type</span><span class="p">(</span><span class="n">iter_or_path</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">path</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iter</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">next</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_next</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">previous</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_previous</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">parent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_parent</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">get_next</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">next_iter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">iter_next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iter</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">next_iter</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">TreeModelRow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="n">next_iter</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_previous</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">prev_iter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">iter_previous</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iter</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">prev_iter</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">TreeModelRow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="n">prev_iter</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_parent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parent_iter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">iter_parent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iter</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">parent_iter</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">TreeModelRow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="n">parent_iter</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">key</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">get_n_columns</span><span class="p">():</span>
                <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;column index is out of bounds: </span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">key</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_negative_index</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iter</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="nb">slice</span><span class="p">):</span>
            <span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="n">step</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">indices</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">get_n_columns</span><span class="p">())</span>
            <span class="n">alist</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="n">step</span><span class="p">):</span>
                <span class="n">alist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iter</span><span class="p">,</span> <span class="n">i</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">alist</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">key</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;indices must be integers, slice or tuple, not </span><span class="si">%s</span><span class="s2">&quot;</span>
                            <span class="o">%</span> <span class="nb">type</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">key</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">get_n_columns</span><span class="p">():</span>
                <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;column index is out of bounds: </span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">key</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_negative_index</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iter</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="nb">slice</span><span class="p">):</span>
            <span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="n">step</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">indices</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">get_n_columns</span><span class="p">())</span>
            <span class="n">indexList</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="n">step</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">indexList</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;attempt to assign sequence of size </span><span class="si">%d</span><span class="s2"> to slice of size </span><span class="si">%d</span><span class="s2">&quot;</span>
                    <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">indexList</span><span class="p">)))</span>

            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">indexList</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iter</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">value</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;attempt to assign sequence of size </span><span class="si">%d</span><span class="s2"> to sequence of size </span><span class="si">%d</span><span class="s2">&quot;</span>
                    <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)))</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
                <span class="bp">self</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;indices must be an integer, slice or tuple, not </span><span class="si">%s</span><span class="s2">&quot;</span>
                            <span class="o">%</span> <span class="nb">type</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_convert_negative_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="n">new_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">get_n_columns</span><span class="p">()</span> <span class="o">+</span> <span class="n">index</span>
        <span class="k">if</span> <span class="n">new_index</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;column index is out of bounds: </span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">index</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">new_index</span>

    <span class="k">def</span> <span class="nf">iterchildren</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">child_iter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">iter_children</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iter</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">TreeModelRowIter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="n">child_iter</span><span class="p">)</span>


<span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;TreeModelRow&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">TreeModelRowIter</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">aiter</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iter</span> <span class="o">=</span> <span class="n">aiter</span>

    <span class="k">def</span> <span class="fm">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">StopIteration</span>
        <span class="n">row</span> <span class="o">=</span> <span class="n">TreeModelRow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">iter_next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iter</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">row</span>

    <span class="c1"># alias for Python 2.x object protocol</span>
    <span class="nb">next</span> <span class="o">=</span> <span class="fm">__next__</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>


<span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;TreeModelRowIter&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">TreePath</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">TreePath</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">path</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">string_types</span><span class="p">):</span>
            <span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;:&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">path</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;could not parse subscript &#39;</span><span class="si">%s</span><span class="s2">&#39; as a tree path&quot;</span> <span class="o">%</span> <span class="n">path</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">TreePath</span><span class="o">.</span><span class="n">new_from_string</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;could not parse subscript &#39;</span><span class="si">%s</span><span class="s2">&#39; as a tree path&quot;</span> <span class="o">%</span> <span class="n">path</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">TreePath</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_string</span><span class="p">()</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">other</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">compare</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="fm">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">other</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">compare</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">other</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">compare</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">other</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">compare</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="fm">__gt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">other</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">compare</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="fm">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">other</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">compare</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_indices</span><span class="p">())</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_depth</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_indices</span><span class="p">()[</span><span class="n">index</span><span class="p">]</span>


<span class="n">TreePath</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">TreePath</span><span class="p">)</span>
<span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;TreePath&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">TreeStore</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">TreeStore</span><span class="p">,</span> <span class="n">TreeModel</span><span class="p">,</span> <span class="n">TreeSortable</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">column_types</span><span class="p">):</span>
        <span class="n">Gtk</span><span class="o">.</span><span class="n">TreeStore</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_column_types</span><span class="p">(</span><span class="n">column_types</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_do_insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">row</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">row</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">row</span><span class="p">,</span> <span class="n">columns</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_row</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
            <span class="n">treeiter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">insert_with_values</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">columns</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">treeiter</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">TreeStore</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">position</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">treeiter</span>

    <span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_insert</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">prepend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_insert</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_insert</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">insert_before</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">sibling</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">row</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">sibling</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">position</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">parent</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_parent</span><span class="p">(</span><span class="n">sibling</span><span class="p">)</span>
                <span class="n">position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="n">sibling</span><span class="p">)</span><span class="o">.</span><span class="n">get_indices</span><span class="p">()[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_insert</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">TreeStore</span><span class="o">.</span><span class="n">insert_before</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">sibling</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">insert_after</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">sibling</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">row</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">sibling</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">position</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">parent</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_parent</span><span class="p">(</span><span class="n">sibling</span><span class="p">)</span>
                <span class="n">position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="n">sibling</span><span class="p">)</span><span class="o">.</span><span class="n">get_indices</span><span class="p">()[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_insert</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">TreeStore</span><span class="o">.</span><span class="n">insert_after</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">sibling</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">treeiter</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_value</span><span class="p">(</span><span class="n">column</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="n">Gtk</span><span class="o">.</span><span class="n">TreeStore</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">treeiter</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">treeiter</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">_set_lists</span><span class="p">(</span><span class="n">cols</span><span class="p">,</span> <span class="n">vals</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">cols</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">vals</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;The number of columns do not match the number of values&#39;</span><span class="p">)</span>

            <span class="n">columns</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">col_num</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">cols</span><span class="p">,</span> <span class="n">vals</span><span class="p">):</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">col_num</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;TypeError: Expected integer argument for column.&#39;</span><span class="p">)</span>

                <span class="n">columns</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">col_num</span><span class="p">)</span>
                <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_convert_value</span><span class="p">(</span><span class="n">col_num</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>

            <span class="n">Gtk</span><span class="o">.</span><span class="n">TreeStore</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">treeiter</span><span class="p">,</span> <span class="n">columns</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">args</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">int</span><span class="p">):</span>
                <span class="n">_set_lists</span><span class="p">(</span><span class="n">args</span><span class="p">[::</span><span class="mi">2</span><span class="p">],</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">::</span><span class="mi">2</span><span class="p">])</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="nb">list</span><span class="p">)):</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Too many arguments&#39;</span><span class="p">)</span>
                <span class="n">_set_lists</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="n">_set_lists</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Argument list must be in the form of (column, value, ...), ((columns,...), (values, ...)) or {column: value}.  No -1 termination is needed.&#39;</span><span class="p">)</span>


<span class="n">TreeStore</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">TreeStore</span><span class="p">)</span>
<span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;TreeStore&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">TreeView</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">TreeView</span><span class="p">,</span> <span class="n">Container</span><span class="p">):</span>
    <span class="fm">__init__</span> <span class="o">=</span> <span class="n">deprecated_init</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">TreeView</span><span class="o">.</span><span class="fm">__init__</span><span class="p">,</span>
                               <span class="n">arg_names</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;model&#39;</span><span class="p">,),</span>
                               <span class="n">category</span><span class="o">=</span><span class="n">PyGTKDeprecationWarning</span><span class="p">)</span>

    <span class="n">get_path_at_pos</span> <span class="o">=</span> <span class="n">strip_boolean_result</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">TreeView</span><span class="o">.</span><span class="n">get_path_at_pos</span><span class="p">)</span>
    <span class="n">get_visible_range</span> <span class="o">=</span> <span class="n">strip_boolean_result</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">TreeView</span><span class="o">.</span><span class="n">get_visible_range</span><span class="p">)</span>
    <span class="n">get_dest_row_at_pos</span> <span class="o">=</span> <span class="n">strip_boolean_result</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">TreeView</span><span class="o">.</span><span class="n">get_dest_row_at_pos</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">enable_model_drag_source</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start_button_mask</span><span class="p">,</span> <span class="n">targets</span><span class="p">,</span> <span class="n">actions</span><span class="p">):</span>
        <span class="n">target_entries</span> <span class="o">=</span> <span class="n">_construct_target_list</span><span class="p">(</span><span class="n">targets</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">TreeView</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">enable_model_drag_source</span><span class="p">(</span><span class="n">start_button_mask</span><span class="p">,</span>
                                                       <span class="n">target_entries</span><span class="p">,</span>
                                                       <span class="n">actions</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">enable_model_drag_dest</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">targets</span><span class="p">,</span> <span class="n">actions</span><span class="p">):</span>
        <span class="n">target_entries</span> <span class="o">=</span> <span class="n">_construct_target_list</span><span class="p">(</span><span class="n">targets</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">TreeView</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">enable_model_drag_dest</span><span class="p">(</span><span class="n">target_entries</span><span class="p">,</span>
                                                     <span class="n">actions</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">scroll_to_cell</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">use_align</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">row_align</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">col_align</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">TreePath</span><span class="p">):</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">TreePath</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">TreeView</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">scroll_to_cell</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">use_align</span><span class="p">,</span> <span class="n">row_align</span><span class="p">,</span> <span class="n">col_align</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_cursor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">start_editing</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">TreePath</span><span class="p">):</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">TreePath</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">TreeView</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">set_cursor</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">start_editing</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_cell_area</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">TreePath</span><span class="p">):</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">TreePath</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">TreeView</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_cell_area</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">column</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">insert_column_with_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">cell</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">column</span> <span class="o">=</span> <span class="n">TreeViewColumn</span><span class="p">()</span>
        <span class="n">column</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
        <span class="n">column</span><span class="o">.</span><span class="n">pack_start</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">insert_column</span><span class="p">(</span><span class="n">column</span><span class="p">,</span> <span class="n">position</span><span class="p">)</span>
        <span class="n">column</span><span class="o">.</span><span class="n">set_attributes</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>


<span class="n">TreeView</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">TreeView</span><span class="p">)</span>
<span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;TreeView&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">TreeViewColumn</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">TreeViewColumn</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">cell_renderer</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="o">**</span><span class="n">attributes</span><span class="p">):</span>
        <span class="n">Gtk</span><span class="o">.</span><span class="n">TreeViewColumn</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">cell_renderer</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pack_start</span><span class="p">(</span><span class="n">cell_renderer</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

        <span class="k">for</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="ow">in</span> <span class="n">attributes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="n">cell_renderer</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="n">cell_get_position</span> <span class="o">=</span> <span class="n">strip_boolean_result</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">TreeViewColumn</span><span class="o">.</span><span class="n">cell_get_position</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_cell_data_func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cell_renderer</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="n">func_data</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">TreeViewColumn</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">set_cell_data_func</span><span class="p">(</span><span class="n">cell_renderer</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="n">func_data</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cell_renderer</span><span class="p">,</span> <span class="o">**</span><span class="n">attributes</span><span class="p">):</span>
        <span class="n">Gtk</span><span class="o">.</span><span class="n">CellLayout</span><span class="o">.</span><span class="n">clear_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cell_renderer</span><span class="p">)</span>

        <span class="k">for</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="ow">in</span> <span class="n">attributes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">Gtk</span><span class="o">.</span><span class="n">CellLayout</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cell_renderer</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>


<span class="n">TreeViewColumn</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">TreeViewColumn</span><span class="p">)</span>
<span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;TreeViewColumn&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">TreeSelection</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">TreeSelection</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">select_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">TreePath</span><span class="p">):</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">TreePath</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">TreeSelection</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">select_path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_selected</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">success</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">aiter</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">TreeSelection</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_selected</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">success</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">aiter</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="c1"># for compatibility with PyGtk</span>

    <span class="k">def</span> <span class="nf">get_selected_rows</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">rows</span><span class="p">,</span> <span class="n">model</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">TreeSelection</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_selected_rows</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">rows</span><span class="p">)</span>


<span class="n">TreeSelection</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">TreeSelection</span><span class="p">)</span>
<span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;TreeSelection&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Button</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">Button</span><span class="p">,</span> <span class="n">Container</span><span class="p">):</span>
    <span class="n">_init</span> <span class="o">=</span> <span class="n">deprecated_init</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">Button</span><span class="o">.</span><span class="fm">__init__</span><span class="p">,</span>
                            <span class="n">arg_names</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;label&#39;</span><span class="p">,</span> <span class="s1">&#39;stock&#39;</span><span class="p">,</span> <span class="s1">&#39;use_stock&#39;</span><span class="p">,</span> <span class="s1">&#39;use_underline&#39;</span><span class="p">),</span>
                            <span class="n">ignore</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;stock&#39;</span><span class="p">,),</span>
                            <span class="n">category</span><span class="o">=</span><span class="n">PyGTKDeprecationWarning</span><span class="p">,</span>
                            <span class="n">stacklevel</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># Doubly deprecated initializer, the stock keyword is non-standard.</span>
        <span class="c1"># Simply give a warning that stock items are deprecated even though</span>
        <span class="c1"># we want to deprecate the non-standard keyword as well here from</span>
        <span class="c1"># the overrides.</span>
        <span class="k">if</span> <span class="s1">&#39;stock&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;stock&#39;</span><span class="p">]:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">&#39;Stock items are deprecated. &#39;</span>
                          <span class="s1">&#39;Please use: Gtk.Button.new_with_mnemonic(label)&#39;</span><span class="p">,</span>
                          <span class="n">PyGTKDeprecationWarning</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
            <span class="n">new_kwargs</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="n">new_kwargs</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_kwargs</span><span class="p">[</span><span class="s1">&#39;stock&#39;</span><span class="p">]</span>
            <span class="n">new_kwargs</span><span class="p">[</span><span class="s1">&#39;use_stock&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">new_kwargs</span><span class="p">[</span><span class="s1">&#39;use_underline&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">del</span> <span class="n">new_kwargs</span><span class="p">[</span><span class="s1">&#39;stock&#39;</span><span class="p">]</span>
            <span class="n">Gtk</span><span class="o">.</span><span class="n">Button</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">new_kwargs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_init</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>


<span class="n">Button</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">Button</span><span class="p">)</span>
<span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Button&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">LinkButton</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">LinkButton</span><span class="p">):</span>
    <span class="fm">__init__</span> <span class="o">=</span> <span class="n">deprecated_init</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">LinkButton</span><span class="o">.</span><span class="fm">__init__</span><span class="p">,</span>
                               <span class="n">arg_names</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;uri&#39;</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">),</span>
                               <span class="n">category</span><span class="o">=</span><span class="n">PyGTKDeprecationWarning</span><span class="p">)</span>


<span class="n">LinkButton</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">LinkButton</span><span class="p">)</span>
<span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;LinkButton&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Label</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">Label</span><span class="p">):</span>
    <span class="fm">__init__</span> <span class="o">=</span> <span class="n">deprecated_init</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">Label</span><span class="o">.</span><span class="fm">__init__</span><span class="p">,</span>
                               <span class="n">arg_names</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;label&#39;</span><span class="p">,),</span>
                               <span class="n">category</span><span class="o">=</span><span class="n">PyGTKDeprecationWarning</span><span class="p">)</span>


<span class="n">Label</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">Label</span><span class="p">)</span>
<span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Label&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Adjustment</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">Adjustment</span><span class="p">):</span>
    <span class="n">_init</span> <span class="o">=</span> <span class="n">deprecated_init</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">Adjustment</span><span class="o">.</span><span class="fm">__init__</span><span class="p">,</span>
                            <span class="n">arg_names</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="s1">&#39;lower&#39;</span><span class="p">,</span> <span class="s1">&#39;upper&#39;</span><span class="p">,</span>
                                       <span class="s1">&#39;step_increment&#39;</span><span class="p">,</span> <span class="s1">&#39;page_increment&#39;</span><span class="p">,</span> <span class="s1">&#39;page_size&#39;</span><span class="p">),</span>
                            <span class="n">deprecated_aliases</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;page_increment&#39;</span><span class="p">:</span> <span class="s1">&#39;page_incr&#39;</span><span class="p">,</span>
                                                <span class="s1">&#39;step_increment&#39;</span><span class="p">:</span> <span class="s1">&#39;step_incr&#39;</span><span class="p">},</span>
                            <span class="n">category</span><span class="o">=</span><span class="n">PyGTKDeprecationWarning</span><span class="p">,</span>
                            <span class="n">stacklevel</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_init</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="c1"># The value property is set between lower and (upper - page_size).</span>
        <span class="c1"># Just in case lower, upper or page_size was still 0 when value</span>
        <span class="c1"># was set, we set it again here.</span>
        <span class="k">if</span> <span class="s1">&#39;value&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>


<span class="n">Adjustment</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">Adjustment</span><span class="p">)</span>
<span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Adjustment&#39;</span><span class="p">)</span>


<span class="k">if</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">_version</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span> <span class="s2">&quot;3.0&quot;</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Table</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">Table</span><span class="p">,</span> <span class="n">Container</span><span class="p">):</span>
        <span class="fm">__init__</span> <span class="o">=</span> <span class="n">deprecated_init</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">Table</span><span class="o">.</span><span class="fm">__init__</span><span class="p">,</span>
                                   <span class="n">arg_names</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;n_rows&#39;</span><span class="p">,</span> <span class="s1">&#39;n_columns&#39;</span><span class="p">,</span> <span class="s1">&#39;homogeneous&#39;</span><span class="p">),</span>
                                   <span class="n">deprecated_aliases</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;n_rows&#39;</span><span class="p">:</span> <span class="s1">&#39;rows&#39;</span><span class="p">,</span> <span class="s1">&#39;n_columns&#39;</span><span class="p">:</span> <span class="s1">&#39;columns&#39;</span><span class="p">},</span>
                                   <span class="n">category</span><span class="o">=</span><span class="n">PyGTKDeprecationWarning</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">attach</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">child</span><span class="p">,</span> <span class="n">left_attach</span><span class="p">,</span> <span class="n">right_attach</span><span class="p">,</span> <span class="n">top_attach</span><span class="p">,</span> <span class="n">bottom_attach</span><span class="p">,</span> <span class="n">xoptions</span><span class="o">=</span><span class="n">Gtk</span><span class="o">.</span><span class="n">AttachOptions</span><span class="o">.</span><span class="n">EXPAND</span> <span class="o">|</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">AttachOptions</span><span class="o">.</span><span class="n">FILL</span><span class="p">,</span> <span class="n">yoptions</span><span class="o">=</span><span class="n">Gtk</span><span class="o">.</span><span class="n">AttachOptions</span><span class="o">.</span><span class="n">EXPAND</span> <span class="o">|</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">AttachOptions</span><span class="o">.</span><span class="n">FILL</span><span class="p">,</span> <span class="n">xpadding</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ypadding</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
            <span class="n">Gtk</span><span class="o">.</span><span class="n">Table</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">child</span><span class="p">,</span> <span class="n">left_attach</span><span class="p">,</span> <span class="n">right_attach</span><span class="p">,</span> <span class="n">top_attach</span><span class="p">,</span> <span class="n">bottom_attach</span><span class="p">,</span> <span class="n">xoptions</span><span class="p">,</span> <span class="n">yoptions</span><span class="p">,</span> <span class="n">xpadding</span><span class="p">,</span> <span class="n">ypadding</span><span class="p">)</span>

    <span class="n">Table</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">Table</span><span class="p">)</span>
    <span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Table&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">ScrolledWindow</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">ScrolledWindow</span><span class="p">):</span>
    <span class="fm">__init__</span> <span class="o">=</span> <span class="n">deprecated_init</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">ScrolledWindow</span><span class="o">.</span><span class="fm">__init__</span><span class="p">,</span>
                               <span class="n">arg_names</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;hadjustment&#39;</span><span class="p">,</span> <span class="s1">&#39;vadjustment&#39;</span><span class="p">),</span>
                               <span class="n">category</span><span class="o">=</span><span class="n">PyGTKDeprecationWarning</span><span class="p">)</span>


<span class="n">ScrolledWindow</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">ScrolledWindow</span><span class="p">)</span>
<span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;ScrolledWindow&#39;</span><span class="p">)</span>


<span class="k">if</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">_version</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span> <span class="s2">&quot;3.0&quot;</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">HScrollbar</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">HScrollbar</span><span class="p">):</span>
        <span class="fm">__init__</span> <span class="o">=</span> <span class="n">deprecated_init</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">HScrollbar</span><span class="o">.</span><span class="fm">__init__</span><span class="p">,</span>
                                   <span class="n">arg_names</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;adjustment&#39;</span><span class="p">,),</span>
                                   <span class="n">category</span><span class="o">=</span><span class="n">PyGTKDeprecationWarning</span><span class="p">)</span>

    <span class="n">HScrollbar</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">HScrollbar</span><span class="p">)</span>
    <span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;HScrollbar&#39;</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">VScrollbar</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">VScrollbar</span><span class="p">):</span>
        <span class="fm">__init__</span> <span class="o">=</span> <span class="n">deprecated_init</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">VScrollbar</span><span class="o">.</span><span class="fm">__init__</span><span class="p">,</span>
                                   <span class="n">arg_names</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;adjustment&#39;</span><span class="p">,),</span>
                                   <span class="n">category</span><span class="o">=</span><span class="n">PyGTKDeprecationWarning</span><span class="p">)</span>

    <span class="n">VScrollbar</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">VScrollbar</span><span class="p">)</span>
    <span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;VScrollbar&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Paned</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">Paned</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">pack1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">child</span><span class="p">,</span> <span class="n">resize</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">shrink</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Paned</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">pack1</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">resize</span><span class="p">,</span> <span class="n">shrink</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">pack2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">child</span><span class="p">,</span> <span class="n">resize</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">shrink</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Paned</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">pack2</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">resize</span><span class="p">,</span> <span class="n">shrink</span><span class="p">)</span>


<span class="n">Paned</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">Paned</span><span class="p">)</span>
<span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Paned&#39;</span><span class="p">)</span>


<span class="k">if</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">_version</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span> <span class="s2">&quot;3.0&quot;</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Arrow</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">Arrow</span><span class="p">):</span>
        <span class="fm">__init__</span> <span class="o">=</span> <span class="n">deprecated_init</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">Arrow</span><span class="o">.</span><span class="fm">__init__</span><span class="p">,</span>
                                   <span class="n">arg_names</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;arrow_type&#39;</span><span class="p">,</span> <span class="s1">&#39;shadow_type&#39;</span><span class="p">),</span>
                                   <span class="n">category</span><span class="o">=</span><span class="n">PyGTKDeprecationWarning</span><span class="p">)</span>

    <span class="n">Arrow</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">Arrow</span><span class="p">)</span>
    <span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Arrow&#39;</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">IconSet</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">IconSet</span><span class="p">):</span>
        <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">pixbuf</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">pixbuf</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">&#39;Gtk.IconSet(pixbuf) has been deprecated. Please use: &#39;</span>
                              <span class="s1">&#39;Gtk.IconSet.new_from_pixbuf(pixbuf)&#39;</span><span class="p">,</span>
                              <span class="n">PyGTKDeprecationWarning</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
                <span class="n">iconset</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">IconSet</span><span class="o">.</span><span class="n">new_from_pixbuf</span><span class="p">(</span><span class="n">pixbuf</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">iconset</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">IconSet</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">iconset</span>

        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">IconSet</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

    <span class="n">IconSet</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">IconSet</span><span class="p">)</span>
    <span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;IconSet&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Viewport</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">Viewport</span><span class="p">):</span>
    <span class="fm">__init__</span> <span class="o">=</span> <span class="n">deprecated_init</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">Viewport</span><span class="o">.</span><span class="fm">__init__</span><span class="p">,</span>
                               <span class="n">arg_names</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;hadjustment&#39;</span><span class="p">,</span> <span class="s1">&#39;vadjustment&#39;</span><span class="p">),</span>
                               <span class="n">category</span><span class="o">=</span><span class="n">PyGTKDeprecationWarning</span><span class="p">)</span>


<span class="n">Viewport</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">Viewport</span><span class="p">)</span>
<span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Viewport&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">TreeModelFilter</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">TreeModelFilter</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">set_visible_func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">TreeModelFilter</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">set_visible_func</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">iter</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="c1"># Delegate to child model</span>
        <span class="nb">iter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_iter_to_child_iter</span><span class="p">(</span><span class="nb">iter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_model</span><span class="p">()</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="nb">iter</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>


<span class="n">TreeModelFilter</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">TreeModelFilter</span><span class="p">)</span>
<span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;TreeModelFilter&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">_version</span> <span class="o">!=</span> <span class="s1">&#39;2.0&#39;</span><span class="p">:</span>
    <span class="k">class</span> <span class="nc">Menu</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">Menu</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">popup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent_menu_shell</span><span class="p">,</span> <span class="n">parent_menu_item</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">button</span><span class="p">,</span> <span class="n">activate_time</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">popup_for_device</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">parent_menu_shell</span><span class="p">,</span> <span class="n">parent_menu_item</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">button</span><span class="p">,</span> <span class="n">activate_time</span><span class="p">)</span>
    <span class="n">Menu</span> <span class="o">=</span> <span class="n">override</span><span class="p">(</span><span class="n">Menu</span><span class="p">)</span>
    <span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Menu&#39;</span><span class="p">)</span>

<span class="n">_Gtk_main_quit</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">main_quit</span>


<span class="nd">@override</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">main_quit</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">main_quit</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="n">_Gtk_main_quit</span><span class="p">()</span>


<span class="n">_Gtk_main</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">main</span>


<span class="nd">@override</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">main</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">register_sigint_fallback</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">main_quit</span><span class="p">):</span>
        <span class="k">with</span> <span class="n">wakeup_on_signal</span><span class="p">():</span>
            <span class="k">return</span> <span class="n">_Gtk_main</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>


<span class="k">if</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">_version</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span> <span class="s2">&quot;3.0&quot;</span><span class="p">):</span>
    <span class="n">stock_lookup</span> <span class="o">=</span> <span class="n">strip_boolean_result</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">stock_lookup</span><span class="p">)</span>
    <span class="n">__all__</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;stock_lookup&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">_version</span> <span class="o">==</span> <span class="s2">&quot;4.0&quot;</span><span class="p">:</span>
    <span class="n">Gtk</span><span class="o">.</span><span class="n">init_check</span><span class="p">()</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">initialized</span><span class="p">,</span> <span class="n">argv</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">init_check</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">argv</span><span class="p">)</span>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, 2021, 2022 Gary Grainger

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>